{% extends 'base.html' %}

{% block title %}Backlog{% endblock %}

{% block body %}
<div class="container mx-auto p-8">
    <div id="pageTop">
        <div class="grid grid-cols-2 gap-2">
            <div class="place-self-end items-center text-right inline-block align-middle">
                <button class="p-2 bg-secondary rounded-lg transition ease-in-out delay-10 hover:-translate-y-1 hover:scale-110 hover:bg-primary duration-50">
                    Close Sprint
                </button>
                <p class="m-3">Total point: <span class="w-auto h-auto py-1 px-2 rounded bg-info text-info-content py-auto my-auto text-center inline-block align-middle">40</span></p>
            </div>
        </div>

        <div id="currentSprint">
            <h1 style="font-size: 2em; margin: 0; padding: 0;">Sprint</h1>
            {% for sprint in sprints %}
            <div style="padding: 1em; margin: 10px 0px 10px 0px; background-color: hsl(0, 0%, 91%); border-radius: 10px; box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;">
                <div style="display: flex; flex-direction: row; align-items: center;">
                    <span style="padding: 5px; border-radius: 5px; color: white; text-transform: uppercase; font-weight: bold; margin-right: 5px; font-size: 0.8em;" class="bg-info">Active</span>
                    <span style="font-weight: bold; font-size: 1.5em; margin-right: 10px;">{{sprint.name}}</span>
                    <span style="color: grey; font-size: 0.9em;">10 gen 2022 - 20 gen 2022</span>
                    <div style="margin-left: auto;"></div>
                    <div class="avatar-group -space-x-6">
                        <div class="avatar">
                            <div class="w-9">
                                <img src="https://api.lorem.space/image/face?hash=53273" />
                            </div>
                        </div>
                        <div class="avatar">
                            <div class="w-9">
                                <img src="https://api.lorem.space/image/face?hash=91831" />
                            </div>
                        </div>
                        <div class="avatar">
                            <div class="w-9">
                                <img src="https://api.lorem.space/image/face?hash=27312" />
                            </div>
                        </div>
                        <div class="avatar">
                            <div class="w-9">
                                <img src="https://api.lorem.space/image/face?hash=26448" />
                            </div>
                        </div>
                    </div>
                </div>
                {% for task in tasks %}
                    {% if task.sprint == sprint.id %}
                        <div style="padding: 1em; background-color: white; border-color: grey; border-width: 2px; border-radius: 1em; margin: 10px;" id="card">
                            <div class=" grid grid-cols-2">
                                <div class="">
                                    <p class="w-auto inline-block align-middle">{{task.name}}</p>
                                </div>
                                <div class="flex justify-end">
                                    <span class="w-auto h-auto py-1 px-2 rounded bg-secondary py-auto my-auto text-center inline-block align-middle">EPICA</span>
                                    <span class="mx-2 my-auto inline-block align-middle">{{task.id}}</span>
                                    <img class="mx-2 flex justify-end inline-block align-middle h-8 w-8 rounded-full ring-2 ring-white" src="https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt=""/>
                                    <span class="w-auto h-auto py-1 px-2 rounded bg-info text-info-content py-auto my-auto text-center inline-block align-middle">0</span>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
            {% endfor %}
            
        </div>
    </div>

    <div id="pageBottom">

        <div class="grid grid-cols-2 gap-2">
            <div style="display: flex; align-items: center">
                <h1 style="font-size: 2em; margin: 0; padding: 0;">Backlog</h1>
                <span style="padding: 5px; border-radius: 5px; text-transform: uppercase; font-weight: bold; margin-right: 5px; font-size: 0.8em;" class="bg-secondary ml-4">{{tasks|selectattr('sprint', 'none')|list|length}} task</span>
            </div>
            <div class="place-self-end items-center text-right inline-block align-middle">
                <a href="#modalNewTask">
                    <button class="p-2 bg-secondary rounded-lg transition ease-in-out delay-10 hover:-translate-y-1 hover:scale-110 hover:bg-primary duration-50">
                        Add Task
                    </button>
                </a>
            </div>
        </div>

        
        <div id="currentSprint">
            {% for task in tasks %}
                {% if task.sprint == None %}
                    <div draggable="true" style="padding: 1em; background-color: white; border-color: grey; border-width: 2px; border-radius: 1em; margin: 10px 1.5em 10px 1.5em;" id="card">
                        <div class=" grid grid-cols-2">
                            <div class="">
                                <p class="w-auto inline-block align-middle">{{task.name}}</p>
                            </div>
                            <div class="flex justify-end">
                                <span class="w-auto h-auto py-1 px-2 rounded bg-secondary py-auto my-auto text-center inline-block align-middle">EPICA</span>
                                <span class="mx-2 my-auto inline-block align-middle">{{task.id}}</span>
                                <img class="mx-2 flex justify-end inline-block align-middle h-8 w-8 rounded-full ring-2 ring-white" src="https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt=""/>
                                <span class="w-auto h-auto py-1 px-2 rounded bg-info text-info-content py-auto my-auto text-center inline-block align-middle">0</span>
                            </div>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}

            <!-- Put this part before </body> tag -->

            <div class="modal" id="modalInfo">
                <div class="modal-box">
                    <a href="#" class="btn btn-sm btn-circle absolute btn-error right-2 top-2">✕</a>
                    <h3 class="font-bold text-lg">Nome della task - Id</h3>
                    <p class="py-4">Descrizione</p>
                    <p class="">
                        Assigned to:  
                        <select class="mt-2 select select-primary w-auto max-w-xs">
                            <option>Federico De Duro</option>
                            <option>Paolo Zanotti</option>
                            <option>Matteo Soldini</option>
                        </select><br>
                        Reported by: 
                        <select class="mt-2 select select-primary w-auto max-w-xs">
                            <option>Federico De Duro</option>
                            <option>Paolo Zanotti</option>
                            <option>Matteo Soldini</option>
                        </select><br>
                        Fibonacci points:
                        <input type="range" min="0" max="8" value="1" class="range range-xs range-primary" step="1" />
                        <div class="w-full flex justify-between text-xs px-2">
                            <span>0</span>
                            <span>0.5</span>
                            <span>1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>5</span>
                            <span>8</span>
                            <span>13</span>
                            <span>21</span>
                        </div>
                        <br>
                    </p>
                    <p class="mt-1">Subtask:</p>
                    <ul class="ml-6 list-disc">
                        <li>Subtask 1</li>
                        <li>Subtask 2</li>
                        <li>Subtask 3</li>
                    </ul>
                    <div class="modal-action">
                        <a href="#" class="btn btn-primary">Save and close</a>
                    </div>
                </div>
            </div>

            <!-- Put this part before </body> tag -->
            <div class="modal" id="modalNewTask">
                <form class="modal-box w-100" id="create-new-task-form" action="backlog" method="post">
                    <a href="#" class="btn btn-sm btn-circle absolute btn-error right-2 top-2">✕</a>
                    <div class="mb-2 form-control w-full max-w-xs">
                        <input type="text" name="name" placeholder="Task name" class="input input-bordered w-full max-w-xs" />
                    </div>

                    <div class="mb-2 form-control w-full max-w-xs">
                        <input type="text" name="name" placeholder="Task description" class="input input-bordered w-full max-w-xs" />
                    </div>

                    <div class="m-2 form-control w-full max-w-xs">
                        Fibonacci points:</p>
                        <input type="range" min="0" max="8" value="1" class="range range-xs range-primary" step="1" />
                        <div class="w-full flex justify-between text-xs px-2">
                            <span>0</span>
                            <span>0.5</span>
                            <span>1</span>
                            <span>2</span>
                            <span>3</span>
                            <span>5</span>
                            <span>8</span>
                            <span>13</span>
                            <span>21</span>
                        </div>
                    </div>

                    <div class="mb-2 form-control w-full max-w-xs">
                        <label class="label">
                            <span class="mb-0 label-text">Epic:</span>
                        </label>  
                        <select class="mt-2 select select-primary w-auto max-w-xs">
                            <option>Maintenance</option>
                            <option>New product</option>
                        </select><br>
                    </div>

                    <div class="mt-0 modal-action">
                        <button class="btn btn-primary" type="submit">Add new task</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %} 